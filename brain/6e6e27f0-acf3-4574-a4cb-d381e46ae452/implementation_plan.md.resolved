# 日本株情報取得ツール 実装計画

日本の上場企業の株価や財務情報を取得するPython製のコマンドラインツール（CLI）を開発します。

## ユーザーレビューが必要な事項

- **データソース選定**: 無料で手軽に利用できる `yfinance` (Yahoo Finance) ライブラリを使用する想定ですが、より信頼性の高い公式データ（J-Quantsなど）や、スクレイピング（Yahoo!ファイナンス等）を希望される場合は方針を変更する必要があります。
    - **提案**: まずは実装コストが低く、多くの情報が取得できる `yfinance` でプロトタイプを作成します。
- **取得対象**: 特定の銘柄コード指定での取得か、あるいは全銘柄（または特定の市場）の一括取得か。
    - **提案**: まずは銘柄コード（例: 7203）を指定して情報を取得する機能を実装し、オプションでCSVファイルからのリスト読み込みに対応します。

## 提案される変更

### 構成
Python スクリプトを使用します。

### [Core]
#### [NEW] [stock_tool.py](file:///C:/Users/shunk/.gemini/antigravity/scratch/stock_tool/stock_tool.py)
- メインロジックを含むスクリプト。
- `yfinance` ライブラリを使用してデータを取得。
- 日本株コード（例: `7203.T`）への自動変換処理。
- 取得項目: 現在値, 前日比, PER, PBR, 配当利回り, 時価総額など。
- 出力: コンソールへのテーブル表示、CSVファイルへの保存。

#### [NEW] [requirements.txt](file:///C:/Users/shunk/.gemini/antigravity/scratch/stock_tool/requirements.txt)
- 必要なライブラリ (`yfinance`, `pandas` 等) を記載。

## 検証計画

### 自動テスト
- 単体テストコードを作成し、データ取得ロジックが正常に動作することを確認します（モックを使用）。

### 手動検証
- 代表的な銘柄（トヨタ、ソニーなど）のコードを入力し、Yahoo!ファイナンス等のWebサイト上の情報と大きく乖離していないか確認します。
- 存在しない銘柄コードを入力した際のエラーハンドリングを確認します。

## Webアプリケーション化 (Streamlit)

### 概要
CLIツールをブラウザで操作可能なWebアプリケーションに変換します。フレームワークにはPythonのみで手軽にデータアプリを作成できる **Streamlit** を採用します。

### 構成変更
#### [NEW] `app.py`
- Streamlitを使用したメインアプリケーション。
- テキストボックスで銘柄コードを入力（複数可）。
- ボタンクリックでデータ取得を実行。
- 結果をインタラクティブなテーブル（並べ替え可能）で表示。
- エラーメッセージのUI表示。

#### [MODIFY] [requirements.txt](file:///C:/Users/shunk/.gemini/antigravity/scratch/stock_tool/requirements.txt)
- `streamlit` を追加。

### 検証計画
- `streamlit run app.py` でローカルサーバーを起動。
- ブラウザでアクセスし、銘柄コード入力 -> データ表示の流れを確認。
- CSV出力機能も残すか、ダウンロード一機能としてUIに統合するか検討（今回は表示優先）。
